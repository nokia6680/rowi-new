.callback {
    width: 100%;

    @include flex-setting(column, flex-start, center);
    --width: calc(100% - 343px);
    padding: toRem(48) calc(var(--width) / 2) toRem(56) calc(var(--width) / 2);
    margin-bottom: toRem(48);

    &__title {
        margin-bottom: toRem(24);

        span {
            color: $blue;
        }
    }

    &__description {
        @include font-setting($primary-font, toRem(16), toRem(22), 400, $dark);
        text-align: left;
        margin-bottom: toRem(94);
        align-self: flex-start;

        &--main {
            margin-bottom: toRem(40);
        }
    }
    
    &__form {
        width: 100%;

        @include flex-setting(column, flex-start, center);

        &.form_wrap {
            &.submitted {
                .callback__description {
                    margin-bottom: 0;
                }
            }
        }
    }

    &__list {
        width: 100%;
        gap: toRem(24);

        @include flex-setting(column, flex-start, center);

        margin-bottom: toRem(70);
    }

    &__item {
        width: 100%;
        @include flex-setting(row, flex-start, center);
    }

    &__checkbox {
        display: none;
    }

    &__label {
        @include font-setting($primary-font, toRem(16), toRem(21), 400, $dark);
        letter-spacing: 0.01em;
    }

    &__checkbox + label {
        @include checkbox-default;
    }

    &__checkbox + label::before {
        @include custom-checkbox;
    }

    &__checkbox:checked + label::after {
        @include checkbox-checked;
    }

    &__nr {
        width: 100%;
        @include flex-setting(column, flex-start, flex-start);

        &-field {
            width: 100%;
            @include flex-setting(row, flex-start, center);
            position: relative;
            margin-bottom: toRem(54);
        }
    }

    &__input {
        width: 100%;
        background-color: transparent;
        padding: 0;
        padding-bottom: toRem(4);
        border: none;
        border-bottom: toRem(2) solid $dark;
        margin-bottom: 0;
        @include font-setting($primary-font, toRem(16), toRem(22), 400, $dark);

        cursor: text;
        position: relative;

        &::-webkit-input-placeholder {
            color: $dark;
            opacity: 0.4;
        }
        &::-moz-placeholder {
            color: $dark;
            opacity: 0.4;
        }
        &:-ms-input-placeholder {
            color: $dark;
            opacity: 0.4;
        }
        &:-moz-placeholder {
            color: $dark;
            opacity: 0.4;
        }

        &.invalid {
            border-color: $red;
        }
    }

    &__error {
        @include font-setting($book-font, toRem(14), toRem(22), 350, $red);
        position: absolute;
        bottom: toRem(-24);
        left: 0;

        &.hidden {
            visibility: hidden;
            opacity: 0;
        }
    }

    &__submit {
        width: 100%;
        @include flex-setting(column, center, center);
        @include font-setting($primary-font, toRem(15), toRem(18), 500, $white);
        letter-spacing: 0.02em;
        background-color: $blue;
        border: none;
        border-radius: toRem(6);

        padding: toRem(15) 0;

        cursor: pointer;
        outline: none;
        margin-bottom: toRem(16);
        transition: 0.35s $cubic;

        &:active {
            opacity: 0.8;
            transition: 0.35s $cubic;
        }
    }

    &__agree {
        @include font-setting($primary-font, toRem(10), toRem(16), 500, $dark);
        text-align: left;
        letter-spacing: 0.01em;

        a {
            color: $blue;
            text-decoration: none;
        }
    }

    &__svg {
        display: none;
    }

    &--factoring {
        padding-bottom: toRem(56);

        .callback__title {
            margin-bottom: toRem(40);
        }

        .callback__form {
            margin-bottom: toRem(56);
        }

        .callback__guide {
            opacity: 1;
        }
    }

    &--warranty {
        .callback__title {
            max-width: 85%;
            align-self: flex-start;
            margin-bottom: toRem(40);
        }

        .callback__description {
            margin-bottom: toRem(94);
        }
    }

    &--credit {
        .callback__title {
            margin-bottom: toRem(40);
        }
    }

    &--blog {
        .callback__title {
            margin-bottom: toRem(40);
        }
    }

    &--page {
        padding-top: toRem(76);

        .callback__title {
            margin-bottom: toRem(73);
        }

        .callback__nr-field {
            margin-bottom: toRem(56);
        }
    }
}

@include min-screen(1200px) {
    .callback {
        --width: calc(100% - 1032px);
        align-items: flex-start;

        padding-top: toRem(48);
        padding-bottom: toRem(56);
        margin-bottom: toRem(112);

        position: relative;

        &.loaded {
            .callback__svg {
                animation: fadeInStatic 0s linear forwards 0.1s;
            }
    
            .callback__line-mask {
                animation: dash 0.4s ease-out forwards 0.1s;
            }
        }

        &__title {
            margin-bottom: toRem(40);
            max-width: 80%;
        }

        &__description {
            width: 100%;
            font-size: toRem(18);
            line-height: toRem(23);
            margin-bottom: toRem(40);
            max-width: toRem(589);
        }

        &__form {
            align-items: flex-start;
        }

        &__list {
            max-width: toRem(650);
            gap: toRem(24) toRem(32);

            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: toRem(72);
        }

        &__item {
            width: auto;
        }

        &__label {
            font-size: toRem(18);
            line-height: toRem(23);
        }

        &__nr {
            width: 100%;
            max-width: toRem(638);
            flex-direction: row;
            justify-content: flex-start;
            align-items: flex-start;
            flex-wrap: nowrap;

            &-field {
                width: 100%;
                margin-bottom: toRem(30);
                margin-right: toRem(16);
            }
        }

        &__input {
            max-width: toRem(394);
            padding-bottom: toRem(16);
            padding-top: toRem(16);
            font-size: toRem(18);
            line-height: toRem(23);
            border-width: toRem(2);
        }

        &__submit {
            width: auto;
            white-space: nowrap;
            padding-left: toRem(24);
            padding-right: toRem(24);
            margin-bottom: 0;
            font-size: toRem(18);
            line-height: toRem(23);
            letter-spacing: 0.02em;

            &:hover,
            &:focus {
                opacity: 0.86;
                transition: 0.35s $cubic;
            }
        }

        &__agree {
            font-family: $book-font;
            font-weight: 350;
            font-size: toRem(14);
            line-height: toRem(22);
        }

        &__svg {
            display: block;
            opacity: 0;
            width: toRem(212);
            height: toRem(288);
            position: absolute;
            right: toRem(109);
            top: toRem(139);
        }
    
        &__line {
            position: absolute;
            top: 0;
            left: 0;
        }
    
        &__line-mask {
            fill: none;
            stroke: $dark;
            stroke-linecap: round;
            stroke-width: 2px;
            animation: undash 0s $cubic forwards;
            z-index: 2;
        }
    
        &--page {
            .callback__description {
                margin-bottom: toRem(72);
            }

            .callback__nr-field {
                margin-bottom: toRem(24);
            }
        }
        &--factoring {
            margin-bottom: toRem(323);
            padding-bottom: toRem(56);
            background-color: #fff;

            .callback__description {
                margin-bottom: toRem(72);
            }

            &::after {
                width: toRem(473);
                height: toRem(545);

                left: auto;
                right: toRem(-222);
                top: toRem(202);
            }

            .callback__form {
                margin-bottom: 0;
            }

            .callback__guide {
                opacity: 1;
                display: flex;
                position: absolute;
                bottom: toRem(-323);
                --width: calc(100% - 960px);
                right: calc(var(--width) / 2);
            }

            .callback__svg {
                top: toRem(80);
                right: calc((100% - 800px) / 2);
            }
        }

        &--warranty {
            &::after {
                --width: calc(100% - 1032px);
                width: toRem(1698);
                height: toRem(460);
                background-size: toRem(1698) toRem(460);
                top: toRem(-80);
                right: auto;
                left: calc((var(--width) / 2) + 874px);
                transform: rotate(0deg);
            }

            .callback__title {
                margin-bottom: toRem(40);
            }

            .callback__description {
                margin-bottom: toRem(72);
                letter-spacing: 0.01em;
            }

            .callback__input {
                font-size: toRem(18);
                line-height: toRem(23);
                line-height: 0.01em;

                margin-bottom: toRem(0);
            }

            .callback__nr {
                margin-bottom: 0;
            }

            .callback__svg {
                top: toRem(80);
                right: calc((100% - 800px) / 2);
            }
        }
        &--page {
            padding-top: toRem(160);
        }

        &--credit {
            .callback__title {
                max-width: 80%;
            }

            .callback__description {
                margin-bottom: toRem(72);
                letter-spacing: 0.01em;
            }

            .callback__input {
                font-size: toRem(18);
                line-height: toRem(23);
                line-height: 0.01em;

                margin-bottom: toRem(0);
            }

            .callback__nr {
                margin-bottom: 0;
            }

            .callback__svg {
                top: toRem(80);
                right: calc((100% - 800px) / 2);
            }
        }

        &--blog {
            &.loaded {
                .callback__svg {
                    animation: fadeInStatic 0s linear forwards 0.1s;
                }
        
                .callback__line-mask {
                    animation: dash 0.4s ease-out forwards 0.1s;
                }
            }
            
            .callback__description {
                margin-bottom: toRem(72);
            }

            .callback__nr {
                max-width: toRem(590);
            }

            .callback__svg {
                display: block;
                opacity: 0;
                width: toRem(162);
                height: toRem(221);
                position: absolute;
                top: toRem(108);
                right: calc((100% - 800px) / 2);
            }
        
            .callback__line {
                position: absolute;
                top: 0;
                left: 0;
            }
        
            .callback__line-mask {
                fill: none;
                stroke: $dark;
                stroke-linecap: round;
                stroke-width: 2px;
                animation: undash 0s $cubic forwards;
                z-index: 2;
            }
        
        }
    }
}

@include min-screen(1440px) {
    .callback {
        &::after {
            --width: calc(100% - 1032px);
            left: calc((var(--width) / 2) + 874px);
        }

        &--blog::after {
            width: toRem(1514);
            height: toRem(410);
            left: calc((var(--width) / 2) + 759px);
        }

        &--credit {
            &::after {
                left: auto;
                right: toRem(-1750);
            }
        }

        &--factoring {
            &::after {
                left: auto;
                right: toRem(-175);
            }
        }
    }
}

@include min-screen(1920px) {
    .callback {
        &::after {
            left: calc((var(--width) / 2) + 910px);
        }

        &--warranty,
        &--page {
            &::after {
                left: calc((var(--width) / 2) + 1028px);
            }
        }

        &--credit {
            &::after {
                left: auto;
                right: toRem(-1700);
            }
        }

        &--blog {
            &::after {
                left: calc((var(--width) / 2) + 800px);
            }
        }

        &--factoring {
            &::after {
                left: auto;
                right: toRem(-195);
            }
        }
    }
}
